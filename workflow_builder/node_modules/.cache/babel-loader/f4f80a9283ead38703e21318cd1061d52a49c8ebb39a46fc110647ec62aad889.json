{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jacob\\\\MultiAgentTeam\\\\workflow_builder\\\\src\\\\components\\\\WorkflowBuilder.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\nimport ReactFlow, { MiniMap, Controls, Background, useNodesState, useEdgesState, addEdge, Panel } from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport yaml from 'js-yaml';\nimport AgentNode from './AgentNode';\nimport AgentPalette from './AgentPalette';\nimport PropertiesPanel from './PropertiesPanel';\nimport ToolBar from './ToolBar';\nimport CustomAgentDialog from './CustomAgentDialog';\nimport ValidationPanel from './ValidationPanel';\nimport TemplatesModal from './TemplatesModal';\nimport { exportToYAML, importFromYAML } from '../utils/yamlConverter';\nimport { loadAllAgents } from '../utils/agentLoader';\nimport { validateWorkflow } from '../utils/workflowValidator';\nimport { ExecutionState, simulateWorkflowExecution } from '../utils/executionState';\nimport './WorkflowBuilder.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst nodeTypes = {\n  agent: AgentNode\n};\nconst WorkflowBuilder = () => {\n  _s();\n  const [nodes, setNodes, onNodesChange] = useNodesState([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [workflowName, setWorkflowName] = useState('Untitled Workflow');\n  const [agentTypes, setAgentTypes] = useState([]);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isTemplatesModalOpen, setIsTemplatesModalOpen] = useState(false);\n  const [validationResult, setValidationResult] = useState(null);\n  const [highlightedNodes, setHighlightedNodes] = useState([]);\n  const reactFlowWrapper = useRef(null);\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\n\n  // Load all agents (built-in + custom) on component mount\n  useEffect(() => {\n    const allAgents = loadAllAgents();\n    setAgentTypes(allAgents);\n  }, []);\n\n  // Refresh agent list (used after creating custom agent)\n  const refreshAgents = useCallback(() => {\n    const allAgents = loadAllAgents();\n    setAgentTypes(allAgents);\n  }, []);\n\n  // Run validation whenever nodes or edges change\n  useEffect(() => {\n    const result = validateWorkflow(nodes, edges);\n    setValidationResult(result);\n  }, [nodes, edges]);\n\n  // Handle connection between nodes\n  const onConnect = useCallback(params => setEdges(eds => addEdge({\n    ...params,\n    animated: true\n  }, eds)), [setEdges]);\n\n  // Handle drag over\n  const onDragOver = useCallback(event => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n\n  // Handle drop from palette\n  const onDrop = useCallback(event => {\n    event.preventDefault();\n    const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\n    const agentData = JSON.parse(event.dataTransfer.getData('application/reactflow'));\n    if (!agentData) return;\n    const position = reactFlowInstance.project({\n      x: event.clientX - reactFlowBounds.left,\n      y: event.clientY - reactFlowBounds.top\n    });\n    const newNode = {\n      id: `${agentData.id}-${Date.now()}`,\n      type: 'agent',\n      position,\n      data: {\n        label: agentData.label,\n        agentType: agentData.id,\n        icon: agentData.icon,\n        color: agentData.color,\n        prompt: '',\n        model: 'claude-3-5-sonnet-20241022'\n      }\n    };\n    setNodes(nds => nds.concat(newNode));\n  }, [reactFlowInstance, setNodes]);\n\n  // Handle node selection\n  const onNodeClick = useCallback((event, node) => {\n    setSelectedNode(node);\n  }, []);\n\n  // Update node data when properties change\n  const onNodeDataChange = useCallback((nodeId, newData) => {\n    setNodes(nds => nds.map(node => {\n      if (node.id === nodeId) {\n        return {\n          ...node,\n          data: {\n            ...node.data,\n            ...newData\n          }\n        };\n      }\n      return node;\n    }));\n  }, [setNodes]);\n\n  // Export workflow to YAML\n  const handleExport = useCallback(() => {\n    const yaml = exportToYAML({\n      name: workflowName,\n      nodes,\n      edges\n    }, agentTypes);\n    const blob = new Blob([yaml], {\n      type: 'text/yaml'\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${workflowName.replace(/\\s+/g, '-').toLowerCase()}.yaml`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }, [nodes, edges, workflowName, agentTypes]);\n\n  // Import workflow from YAML\n  const handleImport = useCallback(event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = e => {\n      const yamlContent = e.target.result;\n      const {\n        name,\n        nodes: importedNodes,\n        edges: importedEdges\n      } = importFromYAML(yamlContent, agentTypes);\n      setWorkflowName(name);\n      setNodes(importedNodes);\n      setEdges(importedEdges);\n    };\n    reader.readAsText(file);\n  }, [setNodes, setEdges, agentTypes]);\n\n  // Clear workflow\n  const handleClear = useCallback(() => {\n    if (window.confirm('Are you sure you want to clear the workflow?')) {\n      setNodes([]);\n      setEdges([]);\n      setSelectedNode(null);\n      setWorkflowName('Untitled Workflow');\n    }\n  }, [setNodes, setEdges]);\n\n  // Open custom agent dialog\n  const handleOpenDialog = useCallback(() => {\n    setIsDialogOpen(true);\n  }, []);\n\n  // Close custom agent dialog\n  const handleCloseDialog = useCallback(() => {\n    setIsDialogOpen(false);\n  }, []);\n\n  // Handle custom agent created\n  const handleAgentCreated = useCallback(newAgent => {\n    refreshAgents();\n    console.log('Custom agent created:', newAgent);\n  }, [refreshAgents]);\n\n  // Open templates modal\n  const handleOpenTemplatesModal = useCallback(() => {\n    setIsTemplatesModalOpen(true);\n  }, []);\n\n  // Close templates modal\n  const handleCloseTemplatesModal = useCallback(() => {\n    setIsTemplatesModalOpen(false);\n  }, []);\n\n  // Auto-positioning algorithm for template nodes\n  const calculateNodePositions = useCallback(agentIds => {\n    const positions = [];\n    const HORIZONTAL_SPACING = 300;\n    const VERTICAL_SPACING = 150;\n    const NODES_PER_ROW = 3;\n    agentIds.forEach((agentId, index) => {\n      const row = Math.floor(index / NODES_PER_ROW);\n      const col = index % NODES_PER_ROW;\n      positions.push({\n        x: col * HORIZONTAL_SPACING + 100,\n        y: row * VERTICAL_SPACING + 100\n      });\n    });\n    return positions;\n  }, []);\n\n  // Handle template selection and load into canvas\n  const handleLoadTemplate = useCallback((yamlContent, templateData) => {\n    try {\n      let parsedData;\n\n      // If YAML content provided, parse it\n      if (yamlContent) {\n        parsedData = yaml.load(yamlContent);\n      } else if (templateData) {\n        // Use template data directly\n        parsedData = {\n          name: templateData.name,\n          agents: templateData.agents,\n          description: templateData.description\n        };\n      } else {\n        console.error('No template data provided');\n        return;\n      }\n\n      // Set workflow name\n      const templateName = parsedData.name || 'Untitled Workflow';\n      setWorkflowName(templateName);\n\n      // Get agent IDs from template\n      const agentIds = parsedData.agents || [];\n\n      // Calculate positions for nodes\n      const positions = calculateNodePositions(agentIds);\n\n      // Create nodes for each agent\n      const newNodes = agentIds.map((agentId, index) => {\n        var _parsedData$custom_pr;\n        const agentInfo = agentTypes.find(a => a.id === agentId);\n        if (!agentInfo) {\n          console.warn(`Agent type \"${agentId}\" not found in agent registry`);\n          return null;\n        }\n        return {\n          id: `${agentId}-${Date.now()}-${index}`,\n          type: 'agent',\n          position: positions[index],\n          data: {\n            label: agentInfo.label,\n            agentType: agentInfo.id,\n            icon: agentInfo.icon,\n            color: agentInfo.color,\n            prompt: ((_parsedData$custom_pr = parsedData.custom_prompts) === null || _parsedData$custom_pr === void 0 ? void 0 : _parsedData$custom_pr[agentId]) || parsedData.project_description || '',\n            model: 'claude-3-5-sonnet-20241022'\n          }\n        };\n      }).filter(node => node !== null);\n\n      // Create edges connecting nodes in sequence\n      const newEdges = [];\n      for (let i = 0; i < newNodes.length - 1; i++) {\n        newEdges.push({\n          id: `edge-${i}`,\n          source: newNodes[i].id,\n          target: newNodes[i + 1].id,\n          animated: true\n        });\n      }\n\n      // Update workflow with template nodes and edges\n      setNodes(newNodes);\n      setEdges(newEdges);\n      console.log('Template loaded:', templateName, newNodes.length, 'agents');\n    } catch (error) {\n      console.error('Error loading template:', error);\n      alert('Failed to load template. Please check the template format.');\n    }\n  }, [agentTypes, setNodes, setEdges, calculateNodePositions]);\n\n  // Handle validation error click (highlight affected nodes)\n  const handleValidationErrorClick = useCallback(nodeIds => {\n    setHighlightedNodes(nodeIds);\n\n    // Clear highlight after 3 seconds\n    setTimeout(() => {\n      setHighlightedNodes([]);\n    }, 3000);\n\n    // If ReactFlow instance is available, fit view to highlighted nodes\n    if (reactFlowInstance && nodeIds.length > 0) {\n      reactFlowInstance.fitView({\n        padding: 0.3,\n        nodes: nodeIds.map(id => ({\n          id\n        })),\n        duration: 800\n      });\n    }\n  }, [reactFlowInstance]);\n\n  // Update execution state for a specific node\n  const updateNodeExecutionState = useCallback((nodeId, executionState) => {\n    setNodes(nds => nds.map(node => {\n      if (node.id === nodeId) {\n        return {\n          ...node,\n          data: {\n            ...node.data,\n            executionState\n          }\n        };\n      }\n      return node;\n    }));\n  }, [setNodes]);\n\n  // Simulate workflow execution (for demonstration/testing)\n  const handleSimulateExecution = useCallback(async () => {\n    if (nodes.length === 0) {\n      alert('Please add agents to the workflow before running simulation');\n      return;\n    }\n    console.log('Starting workflow execution simulation...');\n\n    // Simulate execution with 2-second delay per agent\n    await simulateWorkflowExecution(nodes, (nodeId, state) => updateNodeExecutionState(nodeId, state), 2000);\n  }, [nodes, updateNodeExecutionState]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"workflow-builder\",\n    children: [/*#__PURE__*/_jsxDEV(ToolBar, {\n      workflowName: workflowName,\n      onNameChange: setWorkflowName,\n      onExport: handleExport,\n      onImport: handleImport,\n      onClear: handleClear,\n      onOpenTemplates: handleOpenTemplatesModal,\n      onRun: handleSimulateExecution\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"workflow-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(AgentPalette, {\n          agentTypes: agentTypes,\n          onCreateCustomAgent: handleOpenDialog\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ValidationPanel, {\n          validationResult: validationResult,\n          onErrorClick: handleValidationErrorClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flow-container\",\n        ref: reactFlowWrapper,\n        children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n          nodes: nodes.map(node => ({\n            ...node,\n            className: highlightedNodes.includes(node.id) ? 'highlighted' : ''\n          })),\n          edges: edges,\n          onNodesChange: onNodesChange,\n          onEdgesChange: onEdgesChange,\n          onConnect: onConnect,\n          onInit: setReactFlowInstance,\n          onDrop: onDrop,\n          onDragOver: onDragOver,\n          onNodeClick: onNodeClick,\n          nodeTypes: nodeTypes,\n          fitView: true,\n          children: [/*#__PURE__*/_jsxDEV(Background, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MiniMap, {\n            nodeColor: node => node.data.color,\n            nodeStrokeWidth: 3,\n            zoomable: true,\n            pannable: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Panel, {\n            position: \"top-right\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"info-panel\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Nodes: \", nodes.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Connections: \", edges.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PropertiesPanel, {\n        selectedNode: selectedNode,\n        onNodeDataChange: onNodeDataChange,\n        agentTypes: agentTypes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomAgentDialog, {\n      isOpen: isDialogOpen,\n      onClose: handleCloseDialog,\n      onAgentCreated: handleAgentCreated\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TemplatesModal, {\n      isOpen: isTemplatesModalOpen,\n      onClose: handleCloseTemplatesModal,\n      onSelectTemplate: handleLoadTemplate,\n      agentTypes: agentTypes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 347,\n    columnNumber: 5\n  }, this);\n};\n_s(WorkflowBuilder, \"1SwJ0KwA14dc0dM98O1ZTZHbSxs=\", false, function () {\n  return [useNodesState, useEdgesState];\n});\n_c = WorkflowBuilder;\nexport default WorkflowBuilder;\nvar _c;\n$RefreshReg$(_c, \"WorkflowBuilder\");","map":{"version":3,"names":["React","useState","useCallback","useRef","useEffect","ReactFlow","MiniMap","Controls","Background","useNodesState","useEdgesState","addEdge","Panel","yaml","AgentNode","AgentPalette","PropertiesPanel","ToolBar","CustomAgentDialog","ValidationPanel","TemplatesModal","exportToYAML","importFromYAML","loadAllAgents","validateWorkflow","ExecutionState","simulateWorkflowExecution","jsxDEV","_jsxDEV","nodeTypes","agent","WorkflowBuilder","_s","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","selectedNode","setSelectedNode","workflowName","setWorkflowName","agentTypes","setAgentTypes","isDialogOpen","setIsDialogOpen","isTemplatesModalOpen","setIsTemplatesModalOpen","validationResult","setValidationResult","highlightedNodes","setHighlightedNodes","reactFlowWrapper","reactFlowInstance","setReactFlowInstance","allAgents","refreshAgents","result","onConnect","params","eds","animated","onDragOver","event","preventDefault","dataTransfer","dropEffect","onDrop","reactFlowBounds","current","getBoundingClientRect","agentData","JSON","parse","getData","position","project","x","clientX","left","y","clientY","top","newNode","id","Date","now","type","data","label","agentType","icon","color","prompt","model","nds","concat","onNodeClick","node","onNodeDataChange","nodeId","newData","map","handleExport","name","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","replace","toLowerCase","body","appendChild","click","removeChild","revokeObjectURL","handleImport","file","target","files","reader","FileReader","onload","e","yamlContent","importedNodes","importedEdges","readAsText","handleClear","window","confirm","handleOpenDialog","handleCloseDialog","handleAgentCreated","newAgent","console","log","handleOpenTemplatesModal","handleCloseTemplatesModal","calculateNodePositions","agentIds","positions","HORIZONTAL_SPACING","VERTICAL_SPACING","NODES_PER_ROW","forEach","agentId","index","row","Math","floor","col","push","handleLoadTemplate","templateData","parsedData","load","agents","description","error","templateName","newNodes","_parsedData$custom_pr","agentInfo","find","a","warn","custom_prompts","project_description","filter","newEdges","i","length","source","alert","handleValidationErrorClick","nodeIds","setTimeout","fitView","padding","duration","updateNodeExecutionState","executionState","handleSimulateExecution","state","className","children","onNameChange","onExport","onImport","onClear","onOpenTemplates","onRun","fileName","_jsxFileName","lineNumber","columnNumber","onCreateCustomAgent","onErrorClick","ref","includes","onInit","nodeColor","nodeStrokeWidth","zoomable","pannable","isOpen","onClose","onAgentCreated","onSelectTemplate","_c","$RefreshReg$"],"sources":["C:/Users/jacob/MultiAgentTeam/workflow_builder/src/components/WorkflowBuilder.js"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport ReactFlow, {\n  MiniMap,\n  Controls,\n  Background,\n  useNodesState,\n  useEdgesState,\n  addEdge,\n  Panel,\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport yaml from 'js-yaml';\nimport AgentNode from './AgentNode';\nimport AgentPalette from './AgentPalette';\nimport PropertiesPanel from './PropertiesPanel';\nimport ToolBar from './ToolBar';\nimport CustomAgentDialog from './CustomAgentDialog';\nimport ValidationPanel from './ValidationPanel';\nimport TemplatesModal from './TemplatesModal';\nimport { exportToYAML, importFromYAML } from '../utils/yamlConverter';\nimport { loadAllAgents } from '../utils/agentLoader';\nimport { validateWorkflow } from '../utils/workflowValidator';\nimport { ExecutionState, simulateWorkflowExecution } from '../utils/executionState';\nimport './WorkflowBuilder.css';\n\nconst nodeTypes = {\n  agent: AgentNode,\n};\n\nconst WorkflowBuilder = () => {\n  const [nodes, setNodes, onNodesChange] = useNodesState([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [workflowName, setWorkflowName] = useState('Untitled Workflow');\n  const [agentTypes, setAgentTypes] = useState([]);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isTemplatesModalOpen, setIsTemplatesModalOpen] = useState(false);\n  const [validationResult, setValidationResult] = useState(null);\n  const [highlightedNodes, setHighlightedNodes] = useState([]);\n  const reactFlowWrapper = useRef(null);\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\n\n  // Load all agents (built-in + custom) on component mount\n  useEffect(() => {\n    const allAgents = loadAllAgents();\n    setAgentTypes(allAgents);\n  }, []);\n\n  // Refresh agent list (used after creating custom agent)\n  const refreshAgents = useCallback(() => {\n    const allAgents = loadAllAgents();\n    setAgentTypes(allAgents);\n  }, []);\n\n  // Run validation whenever nodes or edges change\n  useEffect(() => {\n    const result = validateWorkflow(nodes, edges);\n    setValidationResult(result);\n  }, [nodes, edges]);\n\n  // Handle connection between nodes\n  const onConnect = useCallback(\n    (params) => setEdges((eds) => addEdge({ ...params, animated: true }, eds)),\n    [setEdges]\n  );\n\n  // Handle drag over\n  const onDragOver = useCallback((event) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n\n  // Handle drop from palette\n  const onDrop = useCallback(\n    (event) => {\n      event.preventDefault();\n\n      const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\n      const agentData = JSON.parse(event.dataTransfer.getData('application/reactflow'));\n\n      if (!agentData) return;\n\n      const position = reactFlowInstance.project({\n        x: event.clientX - reactFlowBounds.left,\n        y: event.clientY - reactFlowBounds.top,\n      });\n\n      const newNode = {\n        id: `${agentData.id}-${Date.now()}`,\n        type: 'agent',\n        position,\n        data: {\n          label: agentData.label,\n          agentType: agentData.id,\n          icon: agentData.icon,\n          color: agentData.color,\n          prompt: '',\n          model: 'claude-3-5-sonnet-20241022',\n        },\n      };\n\n      setNodes((nds) => nds.concat(newNode));\n    },\n    [reactFlowInstance, setNodes]\n  );\n\n  // Handle node selection\n  const onNodeClick = useCallback((event, node) => {\n    setSelectedNode(node);\n  }, []);\n\n  // Update node data when properties change\n  const onNodeDataChange = useCallback((nodeId, newData) => {\n    setNodes((nds) =>\n      nds.map((node) => {\n        if (node.id === nodeId) {\n          return {\n            ...node,\n            data: { ...node.data, ...newData },\n          };\n        }\n        return node;\n      })\n    );\n  }, [setNodes]);\n\n  // Export workflow to YAML\n  const handleExport = useCallback(() => {\n    const yaml = exportToYAML({ name: workflowName, nodes, edges }, agentTypes);\n    const blob = new Blob([yaml], { type: 'text/yaml' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${workflowName.replace(/\\s+/g, '-').toLowerCase()}.yaml`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }, [nodes, edges, workflowName, agentTypes]);\n\n  // Import workflow from YAML\n  const handleImport = useCallback((event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const yamlContent = e.target.result;\n      const { name, nodes: importedNodes, edges: importedEdges } = importFromYAML(\n        yamlContent,\n        agentTypes\n      );\n      setWorkflowName(name);\n      setNodes(importedNodes);\n      setEdges(importedEdges);\n    };\n    reader.readAsText(file);\n  }, [setNodes, setEdges, agentTypes]);\n\n  // Clear workflow\n  const handleClear = useCallback(() => {\n    if (window.confirm('Are you sure you want to clear the workflow?')) {\n      setNodes([]);\n      setEdges([]);\n      setSelectedNode(null);\n      setWorkflowName('Untitled Workflow');\n    }\n  }, [setNodes, setEdges]);\n\n  // Open custom agent dialog\n  const handleOpenDialog = useCallback(() => {\n    setIsDialogOpen(true);\n  }, []);\n\n  // Close custom agent dialog\n  const handleCloseDialog = useCallback(() => {\n    setIsDialogOpen(false);\n  }, []);\n\n  // Handle custom agent created\n  const handleAgentCreated = useCallback((newAgent) => {\n    refreshAgents();\n    console.log('Custom agent created:', newAgent);\n  }, [refreshAgents]);\n\n  // Open templates modal\n  const handleOpenTemplatesModal = useCallback(() => {\n    setIsTemplatesModalOpen(true);\n  }, []);\n\n  // Close templates modal\n  const handleCloseTemplatesModal = useCallback(() => {\n    setIsTemplatesModalOpen(false);\n  }, []);\n\n  // Auto-positioning algorithm for template nodes\n  const calculateNodePositions = useCallback((agentIds) => {\n    const positions = [];\n    const HORIZONTAL_SPACING = 300;\n    const VERTICAL_SPACING = 150;\n    const NODES_PER_ROW = 3;\n\n    agentIds.forEach((agentId, index) => {\n      const row = Math.floor(index / NODES_PER_ROW);\n      const col = index % NODES_PER_ROW;\n\n      positions.push({\n        x: col * HORIZONTAL_SPACING + 100,\n        y: row * VERTICAL_SPACING + 100,\n      });\n    });\n\n    return positions;\n  }, []);\n\n  // Handle template selection and load into canvas\n  const handleLoadTemplate = useCallback((yamlContent, templateData) => {\n    try {\n      let parsedData;\n\n      // If YAML content provided, parse it\n      if (yamlContent) {\n        parsedData = yaml.load(yamlContent);\n      } else if (templateData) {\n        // Use template data directly\n        parsedData = {\n          name: templateData.name,\n          agents: templateData.agents,\n          description: templateData.description,\n        };\n      } else {\n        console.error('No template data provided');\n        return;\n      }\n\n      // Set workflow name\n      const templateName = parsedData.name || 'Untitled Workflow';\n      setWorkflowName(templateName);\n\n      // Get agent IDs from template\n      const agentIds = parsedData.agents || [];\n\n      // Calculate positions for nodes\n      const positions = calculateNodePositions(agentIds);\n\n      // Create nodes for each agent\n      const newNodes = agentIds.map((agentId, index) => {\n        const agentInfo = agentTypes.find(a => a.id === agentId);\n\n        if (!agentInfo) {\n          console.warn(`Agent type \"${agentId}\" not found in agent registry`);\n          return null;\n        }\n\n        return {\n          id: `${agentId}-${Date.now()}-${index}`,\n          type: 'agent',\n          position: positions[index],\n          data: {\n            label: agentInfo.label,\n            agentType: agentInfo.id,\n            icon: agentInfo.icon,\n            color: agentInfo.color,\n            prompt: parsedData.custom_prompts?.[agentId] || parsedData.project_description || '',\n            model: 'claude-3-5-sonnet-20241022',\n          },\n        };\n      }).filter(node => node !== null);\n\n      // Create edges connecting nodes in sequence\n      const newEdges = [];\n      for (let i = 0; i < newNodes.length - 1; i++) {\n        newEdges.push({\n          id: `edge-${i}`,\n          source: newNodes[i].id,\n          target: newNodes[i + 1].id,\n          animated: true,\n        });\n      }\n\n      // Update workflow with template nodes and edges\n      setNodes(newNodes);\n      setEdges(newEdges);\n\n      console.log('Template loaded:', templateName, newNodes.length, 'agents');\n    } catch (error) {\n      console.error('Error loading template:', error);\n      alert('Failed to load template. Please check the template format.');\n    }\n  }, [agentTypes, setNodes, setEdges, calculateNodePositions]);\n\n  // Handle validation error click (highlight affected nodes)\n  const handleValidationErrorClick = useCallback((nodeIds) => {\n    setHighlightedNodes(nodeIds);\n\n    // Clear highlight after 3 seconds\n    setTimeout(() => {\n      setHighlightedNodes([]);\n    }, 3000);\n\n    // If ReactFlow instance is available, fit view to highlighted nodes\n    if (reactFlowInstance && nodeIds.length > 0) {\n      reactFlowInstance.fitView({\n        padding: 0.3,\n        nodes: nodeIds.map(id => ({ id })),\n        duration: 800,\n      });\n    }\n  }, [reactFlowInstance]);\n\n  // Update execution state for a specific node\n  const updateNodeExecutionState = useCallback((nodeId, executionState) => {\n    setNodes((nds) =>\n      nds.map((node) => {\n        if (node.id === nodeId) {\n          return {\n            ...node,\n            data: {\n              ...node.data,\n              executionState,\n            },\n          };\n        }\n        return node;\n      })\n    );\n  }, [setNodes]);\n\n  // Simulate workflow execution (for demonstration/testing)\n  const handleSimulateExecution = useCallback(async () => {\n    if (nodes.length === 0) {\n      alert('Please add agents to the workflow before running simulation');\n      return;\n    }\n\n    console.log('Starting workflow execution simulation...');\n\n    // Simulate execution with 2-second delay per agent\n    await simulateWorkflowExecution(\n      nodes,\n      (nodeId, state) => updateNodeExecutionState(nodeId, state),\n      2000\n    );\n  }, [nodes, updateNodeExecutionState]);\n\n  return (\n    <div className=\"workflow-builder\">\n      <ToolBar\n        workflowName={workflowName}\n        onNameChange={setWorkflowName}\n        onExport={handleExport}\n        onImport={handleImport}\n        onClear={handleClear}\n        onOpenTemplates={handleOpenTemplatesModal}\n        onRun={handleSimulateExecution}\n      />\n\n      <div className=\"workflow-content\">\n        <div className=\"left-sidebar\">\n          <AgentPalette\n            agentTypes={agentTypes}\n            onCreateCustomAgent={handleOpenDialog}\n          />\n          <ValidationPanel\n            validationResult={validationResult}\n            onErrorClick={handleValidationErrorClick}\n          />\n        </div>\n\n        <div className=\"flow-container\" ref={reactFlowWrapper}>\n          <ReactFlow\n            nodes={nodes.map(node => ({\n              ...node,\n              className: highlightedNodes.includes(node.id) ? 'highlighted' : '',\n            }))}\n            edges={edges}\n            onNodesChange={onNodesChange}\n            onEdgesChange={onEdgesChange}\n            onConnect={onConnect}\n            onInit={setReactFlowInstance}\n            onDrop={onDrop}\n            onDragOver={onDragOver}\n            onNodeClick={onNodeClick}\n            nodeTypes={nodeTypes}\n            fitView\n          >\n            <Background />\n            <Controls />\n            <MiniMap\n              nodeColor={(node) => node.data.color}\n              nodeStrokeWidth={3}\n              zoomable\n              pannable\n            />\n            <Panel position=\"top-right\">\n              <div className=\"info-panel\">\n                <div>Nodes: {nodes.length}</div>\n                <div>Connections: {edges.length}</div>\n              </div>\n            </Panel>\n          </ReactFlow>\n        </div>\n\n        <PropertiesPanel\n          selectedNode={selectedNode}\n          onNodeDataChange={onNodeDataChange}\n          agentTypes={agentTypes}\n        />\n      </div>\n\n      {/* Custom Agent Dialog */}\n      <CustomAgentDialog\n        isOpen={isDialogOpen}\n        onClose={handleCloseDialog}\n        onAgentCreated={handleAgentCreated}\n      />\n\n      {/* Templates Modal */}\n      <TemplatesModal\n        isOpen={isTemplatesModalOpen}\n        onClose={handleCloseTemplatesModal}\n        onSelectTemplate={handleLoadTemplate}\n        agentTypes={agentTypes}\n      />\n    </div>\n  );\n};\n\nexport default WorkflowBuilder;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}